option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: config/wsgi.py  # adjust if your WSGI file is elsewhere

container_commands:
  00_create_static_dir:
    command: "mkdir -p /var/www/simpletix/static/"
  01_migrate:
    command: >
      export $(/opt/elasticbeanstalk/bin/get-config environment | jq -r
      'to_entries|map("\(.key)=\(.value|tostring)")|.[]') &&
      python manage.py migrate --noinput
    leader_only: true
  02_collectstatic:
    command: "python manage.py collectstatic --noinput"
    leader_only: true
