{% extends "simpletix/nav.html" %}
{% load static %}

{% block body %}
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    {{ formset.management_form }}
    <table class="table table-hover">
      <thead class="thead-light">
        <tr>
          <th>Category</th>
          <th>Price</th>
          <th>Availability</th>
        </tr>
      </thead>
      <tbody>
        {% for ticket_form in formset %}
          <tr>
            {{ ticket_form.category }}
            <td class="align-middle">
              <label for="{{ form.price.id_for_label }}">{{ ticket_form.initial.category }}</label>
            </td>
            <td>
              {{ ticket_form.price }}
              {% if ticket_form.price.errors %}<div class="text-danger small">{{ ticket_form.price.errors }}</div>{% endif %}
            </td>
            <td>
              {{ ticket_form.availability }}
              {% if ticket_form.availability.errors %}<div class="text-danger small">{{ ticket_form.availability.errors }}</div>{% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <br>
    <button type="submit" class="btn btn-primary">Save Event</button>
</form>

<!-- Google Places Autocomplete -->
<script src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLE_MAPS_API_KEY }}&libraries=places"></script>
<script src="{% static 'js/autocomplete.js' %}"></script>

{% endblock %}
