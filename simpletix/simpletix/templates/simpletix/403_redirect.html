{% extends "simpletix/nav.html" %}

{% block head %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .count-down-body {
            display: grid;
            place-items: center;
            min-height: 100vh;
            background-color: #f8f9fa;
        }
        .card {
            max-width: 500px;
            width: 100%;
        }
    </style>
{% endblock %}

{% block title %}Permission Denied{% endblock %}

{% block body %}
<div class="count-down-body d-flex align-items-center justify-content-center">
    <div class="card p-4 shadow-sm">
        <div class="card-body text-center">
            <h1 class="h3 fw-bold text-danger">Permission Denied</h1>
            <p class="text-secondary mt-3">
                {{ error_message }}
            </p>
            <p class="text-secondary">
                You will be redirected to the homepage in <strong id="countdown">3</strong> seconds...
            </p>
            <div class="spinner-border text-primary mt-2" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-4 small">
                <a href="javascript:void(0);" onclick="window.location.href='/'">Click here if you are not redirected.</a>
            </p>
        </div>
    </div>

    <script>
        (function() {
            let seconds = 3;
            const countdownElement = document.getElementById('countdown');

            // This function runs every 1 second
            const interval = setInterval(() => {
                seconds--;
                countdownElement.textContent = seconds;

                if (seconds <= 0) {
                    clearInterval(interval);
                    window.location.href = '/'; 
                }
            }, 1000); // 1000 milliseconds = 1 second
        })();
    </script>
</div>
{% endblock %}